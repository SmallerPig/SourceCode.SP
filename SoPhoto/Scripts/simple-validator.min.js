if("undefined"==typeof simple)var simple={};simple.validator=function(){function validate(){var a,b=[],c=!0;for(b=document.querySelectorAll("[s-validator-rules]"),a=0;a<b.length;a++)0==validateElement(b[a])&&(c=!1);return c}function validateElement(a){var b,c,d,e,f,g,h;for("text"!==a.type&&"textarea"!==a.type&&"password"!==a.type&&alert("simple.validator发生错误：只支持验证文本类型的表单元素。\n\n错误产生于元素："+a+"\n不支持的表单元素类型："+a.type),b=a.value,c=-1e4,d=a.getAttribute("s-validator-rules"),e=d.split("|"),f=[],g=[],h=0;h<e.length;h++)e[h]=e[h],f[h]=trim(e[h].split(":")[0]),g[h]="string"==typeof e[h].split(":")[1]?trim(e[h].split(":")[1]):"",""!=f[h]&&(rulesForRegex[f[h]]?rulesForRegex[f[h]](b,g[h])?c=Math.abs(c):c--:alert("simple.validator发生错误：使用了不支持的验证规则。\n\n错误产生于元素："+a+"\n不支持的验证规则："+f[h]));return c>=-1e4?(a.temp_svalidatorFunctionBind=new Function(a.getAttribute("s-validator-onSucceed")),a.temp_svalidatorFunctionBind(),a.temp_svalidatorFunctionBind=null,!0):(a.temp_svalidatorFunctionBind=new Function(a.getAttribute("s-validator-onFail")),a.temp_svalidatorFunctionBind(),a.temp_svalidatorFunctionBind=null,!1)}function rulesForRegex_required(a,b){var c;return c=""==trim(a)?!1:!0,c&&""!=b&&(c=checkString(a,b)),c}function rulesForRegex_email(a){var b=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;return b.test(a)}function rulesForRegex_date(a,b){var c=new RegExp("(([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})-(((0[13578]|1[02])-(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)-(0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8]))))|((([0-9]{2})(0[48]|[2468][048]|[13579][26])|((0[48]|[2468][048]|[3579][26])00))-02-29)"),d=c.test(a);return d&&""!=b&&(d=checkDate(a,b)),d}function rulesForRegex_url(a){var b=new RegExp("^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$");return b.test(a)}function rulesForRegex_number(a,b){var c=/^\d+$/,d=c.test(a);return d&&""!=b&&(d=checkString(a,b)),d}function rulesForRegex_integer(a,b){var c=/^-?\d+$/,d=c.test(a);return d&&""!=b&&(d=checkValue(a,b)),d}function rulesForRegex_real(a,b){var c=/^(-?\d+)(\.\d+)?$/,d=c.test(a);return d&&""!=b&&(d=checkValue(a,b)),d}function rulesForRegex_char(a,b){var c=/^[A-Za-z]+$/,d=c.test(a);return d&&""!=b&&(d=checkString(a,b)),d}function rulesForRegex_charNumber(a,b){var c=/^[A-Za-z0-9]+$/,d=c.test(a);return d&&""!=b&&(d=checkString(a,b)),d}function rulesForRegex_charNumber_(a,b){var c=/^[A-Za-z0-9_]+$/,d=c.test(a);return d&&""!=b&&(d=checkString(a,b)),d}function rulesForRegex_chinese(a,b){var c=/^[\u0391-\uFFE5]+$/,d=c.test(a);return d&&""!=b&&(d=checkString(a,b)),d}function trim(a){return a.replace(/(^\s*)|(\s*$)/g,"")}function trimAll(a){return a.replace(/[ ]/g,"")}function checkString(str,conditionQuery){var i,conditionResult,strLength=trim(str).length,conditionList=trimAll(conditionQuery).split(","),conditionRuleList=[],conditionParamList=[];for(i=0;i<conditionList.length;i++)">="==conditionList[i].substr(0,2)?(conditionRuleList[i]=">=",conditionParamList[i]=conditionList[i].substr(2)):"<="==conditionList[i].substr(0,2)?(conditionRuleList[i]="<=",conditionParamList[i]=conditionList[i].substr(2)):">"==conditionList[i].substr(0,1)?(conditionRuleList[i]=">",conditionParamList[i]=conditionList[i].substr(1)):"<"==conditionList[i].substr(0,1)?(conditionRuleList[i]="<",conditionParamList[i]=conditionList[i].substr(1)):"="==conditionList[i].substr(0,1)?(conditionRuleList[i]="==",conditionParamList[i]=conditionList[i].substr(1)):alert("simple.validator发生错误：验证规则参数有误。");for(conditionResult=!0,i=0;i<conditionRuleList.length;i++)eval("if(strLength"+conditionRuleList[i]+conditionParamList[i]+"){}else{conditionResult=false}");return conditionResult}function checkValue(value,conditionQuery){var i,conditionResult,conditionList=trimAll(conditionQuery).split(","),conditionRuleList=[],conditionParamList=[];for(i=0;i<conditionList.length;i++)">="==conditionList[i].substr(0,2)?(conditionRuleList[i]=">=",conditionParamList[i]=conditionList[i].substr(2)):"<="==conditionList[i].substr(0,2)?(conditionRuleList[i]="<=",conditionParamList[i]=conditionList[i].substr(2)):">"==conditionList[i].substr(0,1)?(conditionRuleList[i]=">",conditionParamList[i]=conditionList[i].substr(1)):"<"==conditionList[i].substr(0,1)?(conditionRuleList[i]="<",conditionParamList[i]=conditionList[i].substr(1)):"="==conditionList[i].substr(0,1)?(conditionRuleList[i]="==",conditionParamList[i]=conditionList[i].substr(1)):alert("simple.validator发生错误：验证规则参数有误。");for(conditionResult=!0,i=0;i<conditionRuleList.length;i++)eval("if(value"+conditionRuleList[i]+conditionParamList[i]+"){}else{conditionResult=false}");return conditionResult}function checkDate(value,conditionQuery){var i,conditionResult,value2,conditionList=trimAll(conditionQuery).split(","),conditionRuleList=[],conditionParamList=[];for(i=0;i<conditionList.length;i++)">="==conditionList[i].substr(0,2)?(conditionRuleList[i]=">=",conditionParamList[i]=checkDate_date2Number(conditionList[i].substr(2))):"<="==conditionList[i].substr(0,2)?(conditionRuleList[i]="<=",conditionParamList[i]=checkDate_date2Number(conditionList[i].substr(2))):">"==conditionList[i].substr(0,1)?(conditionRuleList[i]=">",conditionParamList[i]=checkDate_date2Number(conditionList[i].substr(1))):"<"==conditionList[i].substr(0,1)?(conditionRuleList[i]="<",conditionParamList[i]=checkDate_date2Number(conditionList[i].substr(1))):"="==conditionList[i].substr(0,1)?(conditionRuleList[i]="==",conditionParamList[i]=checkDate_date2Number(conditionList[i].substr(1))):alert("simple.validator发生错误：验证规则参数有误。");for(conditionResult=!0,value2=checkDate_date2Number(value),i=0;i<conditionRuleList.length;i++)eval("if(value2"+conditionRuleList[i]+conditionParamList[i]+"){}else{conditionResult=false}");return conditionResult}function checkDate_date2Number(a){var b=a.split("-");return 1e4*parseInt(b[0])+100*parseInt(b[1])+1*parseInt(b[2])}var rulesForRegex={required:rulesForRegex_required,email:rulesForRegex_email,date:rulesForRegex_date,url:rulesForRegex_url,number:rulesForRegex_number,integer:rulesForRegex_integer,real:rulesForRegex_real,"char":rulesForRegex_char,charNumber:rulesForRegex_charNumber,charNumber_:rulesForRegex_charNumber_,chinese:rulesForRegex_chinese};return{validate:validate}}();