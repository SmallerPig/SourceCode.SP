if(typeof simple=="undefined")var simple={};simple.validator=function(){function validate(){var e=[],t=!0;e=document.querySelectorAll("[s-validator-rules]");for(var n=0;n<e.length;n++)validateElement(e[n])==0&&(t=!1);return t}function validateElement(e){e.type!=="text"&&e.type!=="textarea"&&e.type!=="password"&&alert("simple.validator发生错误：只支持验证文本类型的表单元素。\n\n错误产生于元素："+e+"\n不支持的表单元素类型："+e.type);var t=e.value,n=-1e4,r=e.getAttribute("s-validator-rules"),i=r.split("|"),s=[],o=[];for(var u=0;u<i.length;u++)i[u]=i[u],s[u]=trim(i[u].split(":")[0]),typeof i[u].split(":")[1]=="string"?o[u]=trim(i[u].split(":")[1]):o[u]="",s[u]!=""&&(rulesForRegex[s[u]]?rulesForRegex[s[u]](t,o[u])?n=Math.abs(n):n--:alert("simple.validator发生错误：使用了不支持的验证规则。\n\n错误产生于元素："+e+"\n不支持的验证规则："+s[u]));return n>=-1e4?(e.temp_svalidatorFunctionBind=new Function(e.getAttribute("s-validator-onSucceed")),e.temp_svalidatorFunctionBind(),e.temp_svalidatorFunctionBind=null,!0):(e.temp_svalidatorFunctionBind=new Function(e.getAttribute("s-validator-onFail")),e.temp_svalidatorFunctionBind(),e.temp_svalidatorFunctionBind=null,!1)}function rulesForRegex_required(e,t){var n;return trim(e)==""?n=!1:n=!0,n&&t!=""&&(n=checkString(e,t)),n}function rulesForRegex_email(e,t){var n=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;return n.test(e)}function rulesForRegex_date(e,t){var n,r=new RegExp("(([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})-(((0[13578]|1[02])-(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)-(0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8]))))|((([0-9]{2})(0[48]|[2468][048]|[13579][26])|((0[48]|[2468][048]|[3579][26])00))-02-29)");return n=r.test(e),n&&t!=""&&(n=checkDate(e,t)),n}function rulesForRegex_url(e,t){var n=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;return n.test(e)}function rulesForRegex_number(e,t){var n,r=/^\d+$/;return n=r.test(e),n&&t!=""&&(n=checkString(e,t)),n}function rulesForRegex_integer(e,t){var n,r=/^-?\d+$/;return n=r.test(e),n&&t!=""&&(n=checkValue(e,t)),n}function rulesForRegex_real(e,t){var n,r=/^(-?\d+)(\.\d+)?$/;return n=r.test(e),n&&t!=""&&(n=checkValue(e,t)),n}function rulesForRegex_char(e,t){var n,r=/^[A-Za-z]+$/;return n=r.test(e),n&&t!=""&&(n=checkString(e,t)),n}function rulesForRegex_charNumber(e,t){var n,r=/^[A-Za-z0-9]+$/;return n=r.test(e),n&&t!=""&&(n=checkString(e,t)),n}function rulesForRegex_charNumber_(e,t){var n,r=/^[A-Za-z0-9_]+$/;return n=r.test(e),n&&t!=""&&(n=checkString(e,t)),n}function rulesForRegex_chinese(e,t){var n,r=/^[\u0391-\uFFE5]+$/;return n=r.test(e),n&&t!=""&&(n=checkString(e,t)),n}function trim(e){return e.replace(/(^\s*)|(\s*$)/g,"")}function trimAll(e){return e.replace(/[ ]/g,"")}function checkString(str,conditionQuery){var strLength=trim(str).length,conditionList=trimAll(conditionQuery).split(","),conditionRuleList=[],conditionParamList=[];for(var i=0;i<conditionList.length;i++)conditionList[i].substr(0,2)==">="?(conditionRuleList[i]=">=",conditionParamList[i]=conditionList[i].substr(2)):conditionList[i].substr(0,2)=="<="?(conditionRuleList[i]="<=",conditionParamList[i]=conditionList[i].substr(2)):conditionList[i].substr(0,1)==">"?(conditionRuleList[i]=">",conditionParamList[i]=conditionList[i].substr(1)):conditionList[i].substr(0,1)=="<"?(conditionRuleList[i]="<",conditionParamList[i]=conditionList[i].substr(1)):conditionList[i].substr(0,1)=="="?(conditionRuleList[i]="==",conditionParamList[i]=conditionList[i].substr(1)):alert("simple.validator发生错误：验证规则参数有误。");var conditionResult=!0;for(var i=0;i<conditionRuleList.length;i++)eval("if(strLength"+conditionRuleList[i]+conditionParamList[i]+"){}else{conditionResult=false}");return conditionResult}function checkValue(value,conditionQuery){var conditionList=trimAll(conditionQuery).split(","),conditionRuleList=[],conditionParamList=[];for(var i=0;i<conditionList.length;i++)conditionList[i].substr(0,2)==">="?(conditionRuleList[i]=">=",conditionParamList[i]=conditionList[i].substr(2)):conditionList[i].substr(0,2)=="<="?(conditionRuleList[i]="<=",conditionParamList[i]=conditionList[i].substr(2)):conditionList[i].substr(0,1)==">"?(conditionRuleList[i]=">",conditionParamList[i]=conditionList[i].substr(1)):conditionList[i].substr(0,1)=="<"?(conditionRuleList[i]="<",conditionParamList[i]=conditionList[i].substr(1)):conditionList[i].substr(0,1)=="="?(conditionRuleList[i]="==",conditionParamList[i]=conditionList[i].substr(1)):alert("simple.validator发生错误：验证规则参数有误。");var conditionResult=!0;for(var i=0;i<conditionRuleList.length;i++)eval("if(value"+conditionRuleList[i]+conditionParamList[i]+"){}else{conditionResult=false}");return conditionResult}function checkDate(value,conditionQuery){var conditionList=trimAll(conditionQuery).split(","),conditionRuleList=[],conditionParamList=[];for(var i=0;i<conditionList.length;i++)conditionList[i].substr(0,2)==">="?(conditionRuleList[i]=">=",conditionParamList[i]=checkDate_date2Number(conditionList[i].substr(2))):conditionList[i].substr(0,2)=="<="?(conditionRuleList[i]="<=",conditionParamList[i]=checkDate_date2Number(conditionList[i].substr(2))):conditionList[i].substr(0,1)==">"?(conditionRuleList[i]=">",conditionParamList[i]=checkDate_date2Number(conditionList[i].substr(1))):conditionList[i].substr(0,1)=="<"?(conditionRuleList[i]="<",conditionParamList[i]=checkDate_date2Number(conditionList[i].substr(1))):conditionList[i].substr(0,1)=="="?(conditionRuleList[i]="==",conditionParamList[i]=checkDate_date2Number(conditionList[i].substr(1))):alert("simple.validator发生错误：验证规则参数有误。");var conditionResult=!0,value2=checkDate_date2Number(value);for(var i=0;i<conditionRuleList.length;i++)eval("if(value2"+conditionRuleList[i]+conditionParamList[i]+"){}else{conditionResult=false}");return conditionResult}function checkDate_date2Number(e){var t=e.split("-");return parseInt(t[0])*1e4+parseInt(t[1])*100+parseInt(t[2])*1}var rulesForRegex={required:rulesForRegex_required,email:rulesForRegex_email,date:rulesForRegex_date,url:rulesForRegex_url,number:rulesForRegex_number,integer:rulesForRegex_integer,real:rulesForRegex_real,"char":rulesForRegex_char,charNumber:rulesForRegex_charNumber,charNumber_:rulesForRegex_charNumber_,chinese:rulesForRegex_chinese};return{validate:validate}}()